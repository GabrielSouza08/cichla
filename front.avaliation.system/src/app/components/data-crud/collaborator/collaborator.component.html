<div class="body-collaborator">
    <div *ngIf="statusLoading">
        <div id="screen-protect" *ngIf="statusLoading"></div>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </div>

    <div class="show-action" *ngIf="statusConfirmAction">
        <div id="screen-protect-action"></div>
        <div class="confirm-action">
            <div id="mesage-action">
                {{messageAction}}
            </div>
            <div id="buttons-confirm-action">
                <a (click)="getValueAction(true)" id="buttons-action"> Sim </a>
                <a (click)="getValueAction(false)" id="buttons-action"> Não </a>
            </div>
        </div>
    </div>

    <div class="container-collaborator">

        <div class="navbar">

            <a title="Editar ou remover" (click)="openTable()"><i class="fa fa-pencil-square-o fa-2x" aria-hidden="true" ></i></a>

            <a title="Cadastrar" (click)="openRegister()"><i  class="fa fa-plus fa-2x" aria-hidden="true"></i></a>

            <a title="importar arquivo" (click)="openImport()"><i class="fa fa-upload fa-2x" aria-hidden="true" ></i></a>

        </div>

        <div class="contents">

            <div class="message-success" *ngIf="statusSuccess">
                {{messageSuccess}}
            </div>

            <div class="group-collaborator" *ngIf="statusShowTable">
                <h4> Editar ou remover</h4>

                <div class="form-group" id="input-filter">
                    <label> Filtro </label>
                    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Diretoria" #input>
                </div>

                <div class="list" id="style-1">
                    <table mat-table [dataSource]="dataSource">

                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> Colaborador </th>
                            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                        </ng-container>

                        <!-- <ng-container matColumnDef="email">
                            <th mat-header-cell *matHeaderCellDef> E-mail </th>
                            <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                        </ng-container> -->

                        <ng-container matColumnDef="userName">
                            <th mat-header-cell *matHeaderCellDef> Nome de usuário </th>
                            <td mat-cell *matCellDef="let element"> {{element.userName}} </td>
                        </ng-container>

                        <ng-container matColumnDef="evaluatorName">
                            <th mat-header-cell *matHeaderCellDef> Avaliador </th>
                            <td mat-cell *matCellDef="let element"> {{element.evaluatorName}} </td>
                        </ng-container>
                        <!-- 
                        <ng-container matColumnDef="profileName">
                            <th mat-header-cell *matHeaderCellDef> Perfil </th>
                            <td mat-cell *matCellDef="let element"> {{element.profileName}} </td>
                        </ng-container> -->

                        <ng-container matColumnDef="localName">
                            <th mat-header-cell *matHeaderCellDef> Local </th>
                            <td mat-cell *matCellDef="let element"> {{element.localName}} </td>
                        </ng-container>

                        <ng-container matColumnDef="departmentName">
                            <th mat-header-cell *matHeaderCellDef> Departamento </th>
                            <td mat-cell *matCellDef="let element"> {{element.departmentName}} </td>
                        </ng-container>

                        <!-- <ng-container matColumnDef="areaName">
                            <th mat-header-cell *matHeaderCellDef> Área </th>
                            <td mat-cell *matCellDef="let element"> {{element.areaName}} </td>
                        </ng-container> -->

                        <!-- <ng-container matColumnDef="responsibilityName">
                            <th mat-header-cell *matHeaderCellDef> Cargo </th>
                            <td mat-cell *matCellDef="let element"> {{element.responsibilityName}} </td>
                        </ng-container> -->

                        <!-- <ng-container matColumnDef="registerDate">
                            <th mat-header-cell *matHeaderCellDef> Data de cadastro </th>
                            <td mat-cell *matCellDef="let element"> {{element.registerDate}} </td>
                        </ng-container>

                        <ng-container matColumnDef="changeDate">
                            <th mat-header-cell *matHeaderCellDef> Data de modificação </th>
                            <td mat-cell *matCellDef="let element"> {{element.changeDate}} </td>
                        </ng-container> -->

                        <ng-container matColumnDef="update">
                            <th mat-header-cell *matHeaderCellDef></th>
                            <td mat-cell *matCellDef="let row" id="update-button" (click)="change(row)">
                                <a> Editar </a>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="remove">
                            <th mat-header-cell *matHeaderCellDef></th>
                            <td mat-cell *matCellDef="let row" id="delete-button" (click)="delete(row)">
                                <a> Remover </a>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                </div>

                <span class="required" *ngIf="statusMessage">
                    <div *ngFor="let message of messages">
                        {{ message }}
                    </div>
                </span>
            </div>

            <div class="change" *ngIf="statusShowChange">

                <h4> Editar</h4>
                <div class="update">
                    <form [formGroup]="formChange" (ngSubmit)="inputChange()">
                        <div class="form-group" id="input-change">
                            <label for="Collaborator"> Colaborador </label>
                            <input type="text" class="form-control" placeholder="Nome do colaborador" formControlName="Collaborator">
                            <span class="required" *ngIf="!formChange.controls.Collaborator.valid && formChange.controls.Collaborator.touched">Campo Obrigatório</span>

                            <label for="Collaborator"> Nome de usuário </label>
                            <input type="text" class="form-control" placeholder="Nome de usuário" formControlName="UserName">
                            <span class="required" *ngIf="!formChange.controls.UserName.valid && formChange.controls.UserName.touched">Campo Obrigatório</span>

                            <label for="Email"> E-mail </label>
                            <input type="email" class="form-control" placeholder="Nome@Dominio.com.br" formControlName="Email" required>
                            <span class="required" *ngIf="!formChange.controls.Email.valid && formChange.controls.Email.touched">Campo Obrigatório</span>

                            <label for="DateRegister"> Data de cadastro </label>
                            <a>{{formChange.controls.DateRegister.value}}</a>

                            <div id="group-select">
                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Local</mat-label>
                                        <mat-select formControlName="LocalId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="localFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let local of filteredLocal | async" [value]="local.id"> {{local.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formChange.controls.LocalId.valid && formChange.controls.LocalId.touched">Campo Obrigatório</span>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Departamento</mat-label>
                                        <mat-select formControlName="DepartmentId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="departmentFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let department of filteredDepartment | async" [value]="department.id"> {{department.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formChange.controls.DepartmentId.valid && formChange.controls.DepartmentId.touched">Campo Obrigatório</span>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Área</mat-label>
                                        <mat-select formControlName="AreaId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="areaFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let area of filteredArea | async" [value]="area.id"> {{area.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formChange.controls.AreaId.valid && formChange.controls.AreaId.touched">Campo Obrigatório</span>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Cargo</mat-label>
                                        <mat-select formControlName="ResponsibilityId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="responsibilityFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let responsibility of filteredResponsibility | async" [value]="responsibility.id"> {{responsibility.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formChange.controls.ResponsibilityId.valid && formChange.controls.ResponsibilityId.touched">Campo Obrigatório</span>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;">
                                        <mat-label>Avaliador</mat-label>
                                        <mat-select formControlName="EvaluatorId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="evaluatorFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let evaluator of filteredEvaluator | async" [value]="evaluator.id" title="{{evaluator.responsibilityName}}"> {{evaluator.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Perfil</mat-label>
                                        <mat-select formControlName="ProfileId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="profileFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let profile of filteredProfile | async" [value]="profile.id"> {{profile.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formChange.controls.ProfileId.valid && formChange.controls.ProfileId.touched">Campo Obrigatório</span>
                                </div>

                            </div>
                        </div>
                        <div id="action-change">

                            <button type="submit"> <a id="save-update" title="Salvar"><i class="fa fa-floppy-o fa-2x" aria-hidden="true"></i></a></button>
                            <a (click)="openTable()" id="close-update"> Voltar </a>
                        </div>
                        <span class="required" *ngIf="statusMessage">
                            <div *ngFor="let message of messages">
                                {{ message }}
                            </div>
                        </span>
                    </form>
                </div>

            </div>

            <div class="input" *ngIf="statusShowInput">

                <h4> Cadastrar</h4>

                <div class="register">
                    <form [formGroup]="formInput" (ngSubmit)="inputRegister()">
                        <div class="form-group" id="input-register">
                            <label for="Collaborator"> Colaborador </label>
                            <input type="text" class="form-control" placeholder="Nome do colaborador" formControlName="Collaborator">
                            <span class="required" *ngIf="!formInput.controls.Collaborator.valid && formInput.controls.Collaborator.touched">Campo Obrigatório</span>

                            <label for="Collaborator"> Nome de usuário </label>
                            <input type="text" class="form-control" placeholder="Nome de usuário" formControlName="UserName">
                            <span class="required" *ngIf="!formInput.controls.UserName.valid && formInput.controls.UserName.touched">Campo Obrigatório</span>

                            <label for="Email"> E-mail </label>
                            <input type="email" class="form-control" placeholder="Nome@Dominio.com.br" formControlName="Email" required>
                            <span class="required" *ngIf="!formInput.controls.Email.valid && formInput.controls.Email.touched">Campo Obrigatório</span>

                            <div id="group-select">
                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Local</mat-label>
                                        <mat-select formControlName="LocalId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="localFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let local of filteredLocal | async" [value]="local.id"> {{local.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formInput.controls.LocalId.valid && formInput.controls.LocalId.touched">Campo Obrigatório</span>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Departamento</mat-label>
                                        <mat-select formControlName="DepartmentId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="departmentFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let department of filteredDepartment | async" [value]="department.id"> {{department.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formInput.controls.DepartmentId.valid && formInput.controls.DepartmentId.touched">Campo Obrigatório</span>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Área</mat-label>
                                        <mat-select formControlName="AreaId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="areaFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let area of filteredArea | async" [value]="area.id"> {{area.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formInput.controls.AreaId.valid && formInput.controls.AreaId.touched">Campo Obrigatório</span>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Cargo</mat-label>
                                        <mat-select formControlName="ResponsibilityId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="responsibilityFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let responsibility of filteredResponsibility | async" [value]="responsibility.id"> {{responsibility.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formInput.controls.ResponsibilityId.valid && formInput.controls.ResponsibilityId.touched">Campo Obrigatório</span>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;">
                                        <mat-label>Avaliador</mat-label>
                                        <mat-select formControlName="EvaluatorId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="evaluatorFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let evaluator of filteredEvaluator | async" [value]="evaluator.id" title="{{evaluator.responsibilityName}}"> {{evaluator.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Perfil</mat-label>
                                        <mat-select formControlName="ProfileId">
                                            <mat-option>
                                                <app-pipes-search [formControl]="profileFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let profile of filteredProfile | async" [value]="profile.id"> {{profile.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formInput.controls.ProfileId.valid && formInput.controls.ProfileId.touched">Campo Obrigatório</span>
                                </div>

                            </div>
                        </div>
                        <div id="action-register">
                            <button type="submit"> <a id="save-register" title="Salvar"><i class="fa fa-floppy-o fa-2x" aria-hidden="true"></i></a></button>
                        </div>
                        <span class="required" *ngIf="statusMessage">
                            <div *ngFor="let message of messages">
                                {{ message }}
                            </div>
                        </span>
                    </form>
                </div>
            </div>

            <div class="importer" *ngIf="statusShowImport">

                <h4>Importar</h4>

                <div class="import">
                    <form [formGroup]="formImport" (ngSubmit)="inputImport()">
                        <div class="form-group" id="input-file">
                            <label for="File"> Arquivo </label>
                            <input z-index="2" opacity="0" type="file" class="form-control" id="file" (change)="getFile($event)" #file>
                            <span class="required" *ngIf="!formImport.controls.File.valid && formImport.controls.File.touched">Campo Obrigatório</span>

                            <label for="TypeImport"> Tipo de importação </label>

                            <mat-radio-group aria-label="Select an option" formControlName="TypeImport" requerid>
                                <mat-radio-button color="warn" value="1">Modificar os dados iguais</mat-radio-button>
                                <mat-radio-button color="warn" value="2">Sobrepor os dados</mat-radio-button>
                            </mat-radio-group>
                            <span class="required" *ngIf="!formImport.controls.TypeImport.valid && formImport.controls.TypeImport.touched">Campo Obrigatório</span>
                        </div>
                        <div id="action-import">
                            <button type="submit"> <a id="save-file" title="Importar"><i type="submit" class="fa fa-cloud-upload fa-2x" aria-hidden="true"></i></a> </button>
                        </div>

                        <span class="required" *ngIf="statusMessage">
                            <div *ngFor="let message of messages">
                                {{ message }}
                            </div>
                        </span>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>